<html>
  <head>
    <title>Statistiques</title>
    <link rel="stylesheet" href="/static/css/showprod.css">
    <!--<script type="text/javascript" src="produit.json"></script>-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
        
      function drawChart() {
        var encodedStr ="{{b}}";
        var parser = new DOMParser;
        var dom = parser.parseFromString(
            '<!doctype html><body>' + encodedStr,'text/html');
        var decodedString = dom.body.textContent;
        decodedString=decodedString.slice(1,-1);
        console.log(decodedString)
        var obj=JSON.parse(decodedString);
        console.log(obj)
        var arr=Object.entries(obj);
        var data = google.visualization.arrayToDataTable(arr);

        var options = {
          title: 'Statistique de chaque categorie'
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="piechart" style="width: 900px; height: 500px; margin-left: 25%;"></div>
   

    </div>
  </body>
</html>
